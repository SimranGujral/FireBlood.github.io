---
title: "Modernizing the TLS stack on Servo"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(out.width="750px", dpi=300)
```
## Background and Motivation

Servo, Mozilla's parallel browser engine is written in Rust. Servo aims to create a browser which is memory safe and fast, 
the next generation browser.Before I get to what this post is about, I think its worthwhile to explain the jargon surrounding 
it. I think it is important to explain why TLS is so important, what is RusTLS, why the effort to integrate RusTLS and Servo 
is important.I believe the answers to these questions form the motivation for this project. 

Every time your browser connects to a website, rather, before your browser connects to a website, it performs a 9 step handshake by 
means of which it makes sure that your connection to the website is secure and the parties involved in the communication are 
not malicious. This is basically the SSL/TLS protocol. 
Every browser has its own version of the TLS protocol. As of today, Chrome uses BoringSSL, Safari uses LibreSSL, FireFox uses NSS 
and Servo (our subject for this project) uses Rust-OpenSSL. 
Now, as I mentioned earlier, Servo is the supposed to be next generation browser which is written in Rust- which is inherently type 
safe and memory safe. However, its TLS stack is Rust-OpenSSL, which is basically Rust bindings for OpenSSL which is written in C 
and Assembly. One of the discussions in the Servo community has been to move to Rust Based crypto primitives and to modernize its 
TLS stack.

When we say <b>modernize</b>, what do we mean? 
Well, there were a couple of things we had in mind, one was to make the certificate verification process parallel, to use a certificate verification library based on Rust based Crypto primitives, to make the TLS stack much leaner (in essence this meant removing features which we did not need in a browser today. Over the years, the OpenSSL TLS stack has developed with the browser. During this process, a 
lot of things have come into existence and a lot of things have become obsolete. Hence, it makes sense to clean what we did not need anymore.).

## Concepts
#### BoringSSL
BoringSSL is Google's fork of OpenSSL and was created in response to the Heartbleed bug found in OpenSSL.
It had the absolute necessary features which Google required for their use.
#### Ring
Ring is a fork of BoringSSL which was written in Rust. It is a set of rust cryptographic primitives which are based of BoringSSL.
#### WebPKI
WebPKI is a certificate verification library which works on Ring. It uses rings cryptographic primitives for certificate verification.
#### Rustls
Rustls is the TLS stack written in Rust which uses WebPKI for certificate verification. 

Hence, it goes like this :

<img src="https://github.com/SimranGujral/FireBlood.github.io/blob/master/RustlsDependencyChart.png"></img>

Rustls --> WebPKI --> Ring --> BoringSSL

So, this is how all the pieces of the puzzle fit together, and now we have to fit them into Servo.

However, when you set out to make a browser which is blazingly fast, you need to make sure that any piece you fit in does not slow it down.

Also, when your primary concern for your blazingly fast browser is security, you want to make sure the cryptographic protocols in the new 
version of the TLS stack that you use work correctly. 

Lastly, since you want to move to a leaner version, you want to try to make sure that  the stack supports most of the features that the web depends on. 








FAQs:

1) Why doesn't Servo use NSS?

A: There are no Rust Bindings for NSS. There exist Rust Bindings for OpenSSL. Hence, we use that.

